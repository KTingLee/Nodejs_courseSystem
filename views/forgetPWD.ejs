<!DOCTYPE html>
<html class='no-js' lang='en'>

<head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>逞大選課系統</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet" type ="text/css"/>
    <script src="/js/jquery.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>

    <style>
        #box1{
            width: 700px;
            margin: 20px auto;
        }

        p{
            margin-top: 4px;
            margin-bottom: 4px;
        }
    </style>

</head>

<body>
    <div class="container" id="box1">
        
        <div class="row">
            <!-- <div class="col-lg-3"></div> -->
            <div class="col-lg-6">
                <h3>忘記密碼？</h3>
                <p>電子信箱：</p>
                <input type="text" class="form-control" id="email">
                <p>學號：</p>
                <input type="text" class="form-control" id="stu_id">
                <p>
                <input type="button" class="btn btn-success" value="查詢密碼" id="sendBtn">
                </p>
            </div>
        </div>
    </div>

</body>
<script type="text/javascript">
    $("#sendBtn").click(function(){
        // 獲得表單中的值
        const email  = $("#email").val()
        const id = $("#stu_id").val()

        $.ajax({
            type: 'post',
            url: '/api/auth/forgetPWD',
            dataType: 'json',
            data: {
                id: id,
                email: email
            },
            success: () => {
                alert(`您的密碼已更新，請至信箱查看。\n若無收到，可能是在垃圾郵件或信箱地址錯誤，請聯絡相關人員。`)
                //window.location = "/login"
            },
            error: (msg) => {
                alert(`出錯囉。${msg.message}`)
            }
        })
    })
</script>
</html>